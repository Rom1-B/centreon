<!DOCTYPE HTML>
<html lang="en">
<head>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/tabler-icons.min.css">
</head>
<body>
    <div class="d-flex flew-row align-items-center py-3 ps-2">
    <h1 class="pe-3 m-0">Host Information</h1>
    <img class="h-4 d-inline-block" src="https://cdn.icon-icons.com/icons2/2699/PNG/512/centreon_logo_icon_170408.png" alt="lien_centreon">
    </div>

    <h2 class="p-2 m-0">General</h2>

<div class="datagrid container text-center my-2">
    <div class="row">
    <div class="col">
        <div class="datagrid-item">
            <div class="datagrid-title fw-bold">{{ __("Status") }}</div>
                <div class="datagrid-content mt-2">
                    {% if one_host.status == 'UP' %}
                        <span class="status status-green">
                        {{ one_host.status }}
                        </span>
                    {% elseif one_host.status == 'DOWN' %}
                        <span class="status status-red">
                        {{ one_host.status }}
                        </span>
                    {% else %}
                        <span class="status status-orange">
                        {{ one_host.status }}
                        </span>
                    {% endif %}
                </div>
    </div>
    </div>
    <div class="col">
        <div class="datagrid-item">
            <div class="datagrid-title fw-bold">{{ __("Name") }}</div>
                <div class="datagrid-content mt-2">{{ one_host.name }}</div>
        </div>
    </div>
    <div class="col">
        <div class="datagrid-item">
            <div class="datagrid-title fw-bold">{{ __("Alias") }}</div>
                <div class="datagrid-content mt-2">{{ one_host.alias }}</div>
        </div>
    </div>
    <div class="col">
        <div class="datagrid-item">
            <div class="datagrid-title fw-bold">{{ __("FQDN") }}</div>
                <div class="datagrid-content mt-2">{{ one_host.fqdn }}</div>
        </div>
    </div>
    <div class="col">
        <div class="datagrid-item">
            <div class="datagrid-title fw-bold">{{ __("Last check") }}</div>
                <div class="datagrid-content mt-2">{{ one_host.last_check }}</div>
        </div>
    </div>
    <div class="col">
        <div class="datagrid-item">
            <div class="datagrid-title fw-bold">{{ __("Next check") }}</div>
                <div class="datagrid-content mt-2">{{ one_host.next_check }}</div>
        </div>
    </div>
    <div class="col">
        <div class="datagrid-item">
            <div class="datagrid-title fw-bold">{{ __("Check period") }}</div>
                <div class="datagrid-content mt-2">{{ one_host.check_period }}</div>
        </div>
    </div>
</div>
</div>

<div class="card border-0">
  <div class="card-header">
    <ul class="nav nav-tabs card-header-tabs" data-bs-toggle="tabs">
      <li class="nav-item">
        <a href="#tabs-services-ex1" class="nav-link active" data-bs-toggle="tab">{{ __("Services") }}</a>
      </li>
      <li class="nav-item">
        <a href="#tabs-historique-ex1" class="nav-link" data-bs-toggle="tab">{{ __("Timeline") }}</a>
      </li>
    </ul>
  </div>
</div>

  <div class="card-body">
    <div class="tab-content">
      <div class="tab-pane active show" id="tabs-services-ex1">
        <div class="d-flex flew-row align-items-center p-2 mt-3">
                <h2 class="pe-3 m-0">{{ __("Services") }}</h2>
                {% set count_ok = 0 %}
                {% set count_w = 0 %}
                {% set count_d = 0 %}
                {% set count_un = 0 %}
                    {% for service in one_host["services"] %}
                        {% if service.status.name == "OK" %}
                            {% set count_ok = count_ok + 1 %}
                        {% elseif service.status.name == "WARNING" %}
                            {% set count_w = count_w + 1 %}
                        {% elseif service.status.name == "CRITICAL" %}
                            {% set count_d = count_d + 1 %}
                        {% else %}
                            {% set count_un = count_un + 1 %}
                        {% endif %}
                    {% endfor %}
                        <div class="d-flex align-items-center" >
                            <span class="badge bg-teal m-1" title="OK" data-bs-toggle="tooltip" data-bs-placement="top">{{ count_ok }}</span>
                            <span class="badge bg-orange m-1" title="WARNING" data-bs-toggle="tooltip" data-bs-placement="top">{{ count_w }}</span>
                            <span class="badge bg-red m-1" title="CRITICAL" data-bs-toggle="tooltip" data-bs-placement="top">{{ count_d }}</span>
                            <span class="badge bg-grey m-1" title="UNKNOWN" data-bs-toggle="tooltip" data-bs-placement="top">{{ count_un }}</span>
                        </div>
        </div>

        <div class="row row-deck p-2 mb-2">
            {% for service in one_host["services"] %}
                <div class="col-md-4">
                <div class="card mt-3" style="max-height: 200px;">
                    {% if service.status.name == "OK" %}
                        <div class="card-status-start bg-green"></div>
                        <div class="card-body">
                        <div class="d-flex align-items-center">
                        <span class="status status-green">{{ service.status.name }}</span>
                        <h3 class="card-title m-0 px-2 text-truncate">{{ service["display_name"] }}</h3>
                        </div>
                    {% elseif service.status.name == "WARNING" %}
                        <div class="card-status-start bg-orange"></div>
                        <div class="card-body">
                        <div class="d-flex align-items-center">
                        <span class="status status-orange">{{ service.status.name }}</span>
                        <h3 class="card-title m-0 px-2 text-truncate">{{ service["display_name"] }}</h3>
                        </div>
                    {% elseif service.status.name == "CRITICAL" %}
                        <div class="card-status-start bg-red"></div>
                        <div class="card-body">
                        <div class="d-flex align-items-center">
                        <span class="status status-red">{{ service.status.name }}</span>
                        <h3 class="card-title m-0 px-2 text-truncate">{{ service["display_name"] }}</h3>
                        </div>
                    {% else %}
                        <div class="card-status-start bg-secondary"></div>
                        <div class="card-body">
                        <div class="d-flex align-items-center">
                        <span class="status status-grey">{{ service.status.name }}</span>
                        <h3 class="card-title m-0 px-2 text-truncate">{{ service["display_name"] }}</h3>
                        </div>
                    {% endif %}
                        <div class="d-flex justify-content-between">
                        <code class="m-0 mt-3"> {{ service["output"] }} </code>
                        <code class="text-nowrap m-0 mt-3 ms-2"> {{ service["duration"] }} </code>
                </div>
                </div>
        </div>
  </div>
             {% endfor %}
</div>
    </div>

        <div class="tab-pane" id="tabs-historique-ex1">
            <h2 class="pe-3 my-2">{{ __("Timeline") }}</h2>

            <div class="card">
                <div class="card-header">
                    <ul class="nav nav-tabs card-header-tabs" data-bs-toggle="tabs">
                    <li class="nav-item">
                        <a href="#tabs-today-ex1" class="nav-link active" data-bs-toggle="tab">{{ __("Today") }}</a>
                    </li>
                    <li class="nav-item">
                        <a href="#tabs-day-ex1" class="nav-link" data-bs-toggle="tab">{{ __("1 Day") }}</a>
                    </li>
                    <li class="nav-item">
                        <a href="#tabs-week-ex1" class="nav-link" data-bs-toggle="tab">{{ __("1 Week") }}</a>
                    </li>
                    <li class="nav-item">
                        <a href="#tabs-month-ex1" class="nav-link" data-bs-toggle="tab">{{ __("1 Month") }}</a>
                    </li>
                    </ul>
                </div>

                <div class="card-body">
                    <div class="tab-content">
                    {% set date_t = now|date("l,F d,Y") %}
                    <div class="tab-pane active show" id="tabs-today-ex1">
                        <h4>{{ __("Today") }}</h4>
                            <p>{{ date_t }}</p>
                            {% for tl in one_host["timeline"] %}
                                {% if tl.date|date("l,F d,Y") == date_t %}
                                    <div class="card d-flex my-2">
                                    <div class="card-body my-2">
                                        <span style="font-size:20px;" class="position-absolute top-50 start-0 translate-middle"><i class="ti ti-calendar-time"></i></span>
                                        {% if tl.status.name == "UP" %}
                                            <span class="status status-green">{{ tl.status.name }}</span>
                                        {% elseif tl.status.name == "DOWN" %}
                                            <span class="status status-red">{{ tl.status.name }}</span>
                                        {% elseif tl.status.name == "WARNING" %}
                                            <span class="status status-orange">{{ tl.status.name }}</span>
                                        {% else %}
                                            <span class="status status-grey">{{ tl.status.name }}</span>
                                        {% endif %}
                                        <code>{{ tl.content }}</code>
                                        <code> tries : {{ tl.tries }}</code>
                                        <code class="float-end">{{ tl.date|date("l,F d,Y G:i:s") }}</code>
                                    </div>
                                    </div> 
                                {% endif %}
                            {% endfor %}
                    </div>
                    <div class="tab-pane" id="tabs-day-ex1">
                        <h4>{{ __("1 day ago") }}</h4>
                        {% set date_d = date_t|date_modify("-1 day")|date("l,F d,Y") %}
                            <p>{{ date_d }}</p>
                                {% for tl in one_host["timeline"] %}
                                    {% if tl.date|date("l,F d,Y") == date_d %}
                                        <div class="card d-flex my-2">
                                        <div class="card-body my-2">
                                            <span style="font-size:20px;" class="position-absolute top-50 start-0 translate-middle"><i class="ti ti-calendar-time"></i></span>
                                            {% if tl.status.name == "UP" %}
                                                <span class="status status-green">{{ tl.status.name }}</span>
                                            {% elseif tl.status.name == "DOWN" %}
                                                <span class="status status-red">{{ tl.status.name }}</span>
                                            {% elseif tl.status.name == "WARNING" %}
                                                <span class="status status-orange">{{ tl.status.name }}</span>
                                            {% else %}
                                                <span class="status status-grey">{{ tl.status.name }}</span>
                                            {% endif %}
                                            <code>{{ tl.content }}</code>
                                            <code> tries : {{ tl.tries }}</code>
                                            <code class="float-end">{{ tl.date|date("l,F d,Y G:i:s") }}</code>
                                        </div>
                                        </div>
                                    {% endif %}
                                {% endfor %}
                    </div>
                    <div class="tab-pane" id="tabs-week-ex1">
                        <h4>{{ __("1 week ago") }}</h4>
                        {% set date_w = date_t|date_modify("-7 days")|date("l,F d,Y") %}
                            <p>{{ date_w }}</p>
                                {% for tl in one_host["timeline"] %}
                                    {% if tl.date|date("l,F d,Y") >= date_w %}
                                        <div class="card d-flex my-2">
                                        <div class="card-body my-2">
                                            <span style="font-size:20px;" class="position-absolute top-50 start-0 translate-middle"><i class="ti ti-calendar-time"></i></span>
                                            {% if tl.status.name == "UP" %}
                                                <span class="status status-green">{{ tl.status.name }}</span>
                                            {% elseif tl.status.name == "DOWN" %}
                                                <span class="status status-red">{{ tl.status.name }}</span>
                                            {% elseif tl.status.name == "WARNING" %}
                                                <span class="status status-orange">{{ tl.status.name }}</span>
                                            {% else %}
                                                <span class="status status-grey">{{ tl.status.name }}</span>
                                            {% endif %}
                                            <code>{{ tl.content }}</code>
                                            <code> tries : {{ tl.tries }}</code>
                                            <code class="float-end">{{ tl.date|date("l,F d,Y G:i:s") }}</code>
                                        </div>
                                        </div>
                                    {% endif %}
                                {% endfor %}
                    </div>
                    <div class="tab-pane" id="tabs-month-ex1">
                        <h4>{{ __("1 month ago") }}</h4>
                        {% set date_m = date_t|date_modify("-1 month")|date("l,F d,Y") %}
                            <p>{{ date_m }}</p>
                                {% for tl in one_host["timeline"] %}
                                    {% if tl.date|date("l,F d,Y") >= date_m %}
                                        <div class="card d-flex my-2">
                                        <div class="card-body my-2">
                                            <span style="font-size:20px;" class="position-absolute top-50 start-0 translate-middle"><i class="ti ti-calendar-time"></i></span>
                                            {% if tl.status.name == "UP" %}
                                                <span class="status status-green">{{ tl.status.name }}</span>
                                            {% elseif tl.status.name == "DOWN" %}
                                                <span class="status status-red">{{ tl.status.name }}</span>
                                            {% elseif tl.status.name == "WARNING" %}
                                                <span class="status status-orange">{{ tl.status.name }}</span>
                                            {% else %}
                                                <span class="status status-grey">{{ tl.status.name }}</span>
                                            {% endif %}
                                            <code>{{ tl.content }}</code>
                                            <code> tries : {{ tl.tries }}</code>
                                            <code class="float-end">{{ tl.date|date("l,F d,Y G:i:s") }}</code>
                                        </div>
                                        </div>
                                    {% endif %}
                                {% endfor %}
                    </div>
                    </div>
                </div>
                </div>
        </div>
    </body>
</html>